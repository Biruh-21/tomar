{% extends "base.html" %}
{% load static %}
{% load post_read_time %}

{% block title %} Tomar Author - {{ user.display_name|capfirst }} {% endblock %}

{% block main %}
<!-- Begin Top Author Page
================================================== -->
<div class="container">
	<div class="row">
		<div class="col-md-2"></div>
		<div class="col-md-8 col-md-offset-2">
			{% if messages %}
				{% for message in messages %}
					<div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert" id="msg">
					{{ message }}
					<button type="button" class="close" data-dismiss="alert" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					</div>
				{% endfor %}
			{% endif %}
			<div class="mainheading">
				<div class="row post-top-meta authorpage">
					<div class="col-md-8 col-xs-12">
						{% if user.first_name %}
							<h3>{{ user.get_full_name }}</h3>
						{% else %}
							<h3>{{ user.display_name }}</h3>
						{% endif %}

						<span class="author-description">{{ user.profile.bio }}</span> <br>

						{% if request.user.display_name == user.display_name %}
							<a href="{% url 'accounts:profile-update' user.display_name %}" class="btn follow btn-primary">Update</a>
						{% else %}
							<a href="#" class="btn follow btn-primary">Follow</a>
						{% endif %}
						<a href="{% url 'accounts:about-user' user.display_name %}" class="btn follow btn-outline-primary">About</a>
					</div>
					<div class="col-md-4 col-xs-12">
						<p class="text-center">
							<img class="author-thumb" src="{{ user.profile.avator.url }}" alt="{{ user.display_name }}">
						</p>
						<p class="text-small text-center text-primary">
							<span><a href="#">84k Followers</a></span><span class="dot"></span><span><a href="#">143 Following</a></span>
						</p>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- End Top Author Meta
================================================== -->

<!-- Begin Author Posts
================================================== -->
<div class="graybg authorpage">
	<div class="container">
		<div class="listrecent listrelated">

		<!-- begin post -->
		{% for post in user_posts %}
		<div class="authorpostbox">
			<div class="card">
				<a href="{% url 'blog:post-detail' post.slug %}">
				<img class="img-fluid img-thumb" src="{{ post.image.url }}" alt="">
				</a>
				<div class="card-block">
					<h2 class="card-title"><a href="{% url 'blog:post-detail' post.slug %}">{{ post.title }}</a></h2>
					<h4 class="card-text">{{ post.summary }}</h4>
					<div class="metafooter">
						<div class="wrapfooter">
							<span class="meta-footer-thumb" >
							<a href="{% url 'accounts:profile' user.display_name %}"><img class="author-thumb" src="{{ user.profile.avator.url }}" alt="{{ user.display_name }}"></a>
							</span>
							<span class="author-meta">
							<span class="post-name"><a href="{% url 'accounts:profile' user.display_name %}">{{ user.display_name }}</a></span><br/>
							<span class="post-date">{{post.date_posted|date:"F d, Y" }}</span><span class="dot"></span><span class="post-read">{{ post.content|readtime }}</span>
							</span>
							{% if request.user == post.author %}
							<span class="post-action">
								<a class="btn btn-sm btn-outline-primary" href="{% url 'blog:post-update' post.slug %}">Edit</a>
								<a class="btn btn-sm btn-outline-primary" href="{% url 'blog:post-delete' post.slug %}">Delete</a>
							</span>
							{% else %}
							<span class="post-read-more">
								{% csrf_token %}
								<button class="bookmark-icon" style="all: unset;cursor: pointer;" value="{{ post.pk }}">
								{% if post in saved_posts %}
									<i class="fas fa-bookmark fa-lg"></i>
								{% else %}
									<i class="far fa-bookmark fa-lg"></i>
								{% endif %}
								</button>
							</span>
							{% endif %}
						</div>
					</div>
				</div>
			</div>
		</div>
		{% endfor %}
				<!-- end post -->
		</div>
	</div>
</div>
<!-- End Author Posts
================================================== -->

{% include "footer.html" %}

{% block page_js %}
	<script>
		setTimeout(function(){
		if ($('#msg').length > 0) {
			$('#msg').remove();
		}
		}, 3000)
  </script> 
  	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="{% static 'blog/scripts/main.js' %}"></script>
  
{% endblock %}

{% endblock %}
